---
date: 2004-10-04 02:19:09+00:00
layout: post
title: git help
thread: 165
categories: 文档
---

## 文件的三种状态

 对于任何一个文件，在Git内都只有三种状态：已提交（committed），已修改（modified）和已暂存（staged）。
- 已提交表示该文件已经被安全地保存在本地数据库中了；已修改表示修改了某个文件，但还没有提交保存；已暂存表示把已修改的文件放在下次提交时要保存的清单中。
![工作目录，暂存区域，以及本地仓库](http://git-scm.com/figures/18333fig0106-tn.png)
图1-6. 工作目录，暂存区域，以及本地仓库

每个项目都有一个 Git 目录/( .git 目录/)

从项目中取出某个版本的所有文件和目录，用以开始后续工作的叫做工作目录。这些文件实际上都是从 Git 目录中的压缩对象数据库中提取出来的，接下来就可以在工作目录中对这些文件进行编辑。

所谓的暂存区域只不过是个简单的文件，一般都放在 Git 目录中。有时候人们会把这个文件叫做索引文件，不过标准说法还是叫暂存区域。

基本的 Git 工作流程如下：

- 在工作目录中修改某些文件。
- 对修改后的文件进行快照，然后保存到暂存区域。
- 提交更新，将保存在暂存区域的文件快照永久转储到 Git 目录中。

所以，我们可以从文件所处的位置来判断状态：如果是 Git 目录中保存着的特定版本文件，就属于已提交状态；如果作了修改并已放入暂存区域，就属于已暂存状态；如果自上次取出后，作了修改但还没有放到暂存区域，就是已修改状态。

Git 提供了一个叫做 git config 的工具，专门用来配置或读取相应的工作环境变量，决定Git在各个环节的具体工作方式和行为。
这些变量可以存放在以下三个不同的地方：
- /etc/gitconfig 文件：系统中对所有用户都普遍适用的配置。若使用 git config 时用 **--system** 选项，读写的就是这个文件。
- ~/.gitconfig 文件：用户目录下的配置文件只适用于该用户。若使用 git config 时用 **--global** 选项，读写的就是这个文件。
- 当前项目的 Git 目录中的配置文件（也就是工作目录中的 .git/config 文件）：这里的配置仅仅针对当前项目有效。

每一个级别的配置都会覆盖上层的相同配置.

git config --list可以查阅


想了解 Git 的各式工具该怎么用，可以阅读它们的使用帮助，方法有三：

	$ git help <verb>
	$ git <verb> --help
	$ man git-<verb>

## Chapter 2 Git 基础

读完本章，你就能:

- 初始化一个新的代码仓库，做一些适当配置；
- 开始或停止跟踪某些文件；暂存或提交某些更新。
- 我们还会展示如何让 Git 忽略某些文件，或是名称符合特定模式的文件.
- 如何既快且容易地撤消犯下的小错误；
- 如何浏览项目的更新历史，查看某两次更新之间的差异；
- 以及如何从远程仓库拉数据下来或者推数据上去。

git init:把本文件夹作为工作目录（生成 .git 文件夹）
git clone：把repository克隆到指定文件夹（里边有 .git 文件夹）
git clone <url> name


工作目录下面的所有文件都不外乎这两种状态：已跟踪或未跟踪。已跟踪的文件是指本来就被纳入版本控制管理的文件，在上次快照中有它们的记录，工作一段时间后，它们的状态可能是未更新，已修改或者已放入暂存区。而所有其他文件都属于未跟踪文件。

在编辑过某些文件之后，Git 将这些文件标为已修改。
我们逐步把这些修改过的文件放到暂存区域，直到最后一次性提交所有这些暂存起来的文件，如此重复。
[图 2-1. 文件的状态变化周期](http://git-scm.com/figures/18333fig0201-tn.png)
图 2-1. 文件的状态变化周期

changes to be commited: 修改过处于暂存状态

在 git add 后面可以指明要跟踪的文件或目录路径。如果是目录的话，就说明要递归跟踪该目录下的所有文件。
新加的文件需要add，修改过的也要add，才算进暂存区，等着被commit。

如果add进缓存区之后再修改，就又出现一个新副本，提交（commit）时只提交已进入暂存去的版本，所以此时要再次add

忽略某些文件：创建一个名为 .gitignore 的文件，列出要忽略的文件模式。
例如：
	*.[oa]
	*~
第一行告诉 Git 忽略所有以 .o 或 .a 结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的，我们用不着跟踪它们的版本。第二行告诉 Git 忽略所有以波浪符（~）结尾的文件

文件 .gitignore 的格式规范如下：

- 所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略。
- 可以使用标准的 glob 模式匹配。
- 匹配模式最后跟反斜杠（/）说明要忽略的是目录。
- 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。

所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。星号（*）匹配零个或多个任意字符；[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（?）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的数字）。

我们再看一个`.gitignore`文件的例子：

	# 此为注释 – 将被 Git 忽略
	# 忽略所有 .a 结尾的文件
	*.a
	# 但 lib.a 除外
	!lib.a
	# 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
	/TODO
	# 忽略 build/ 目录下的所有文件
	build/
	# 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
	doc/*.txt
	# ignore all .txt files in the doc/ directory
	doc/**/*.txt

运行提交命令 git commit
也可以用 -m 参数后跟提交说明的方式

只要在提交的时候，给 git commit 加上 -a 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤

要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。可以用 git rm 命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。

手工删除文件,然后再git rm

如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 -f（译注：即 force 的首字母），以防误删除文件后丢失修改的内容。


git rm --cached可以把不删除文件而只是变成untracked状态

git重命名 git mv
	$ git mv file_from file_to

修改最后一次提交
$ git commit --amend

从暂存区撤回
	git reset HEAD 

取消文件中的修改
	git checkout --


## Chapter3 Git 分支

必杀技特性：

	难以置信的轻量级，它的新建操作几乎可以在瞬间完成，并且在不同分支间切换起来也差不多一样快

要建并切换到该分支，运行 git checkout 并加上 -b 参数：





